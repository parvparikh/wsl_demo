import React, { useEffect } from "react";
import Plot from "react-plotly.js";
import * as api from "../../../data/api.js";
import { useState } from "react";
const Main = (props) => {
  useEffect(() => {
    async function initialise() {
      await api.loadResourceData();
    }
    // Execute the created function directly
    initialise();
  }, []);
  return (
    <div className="flex relative items-center justify-center w-full ">
      <Plot
        data={[
          {
            x: api.resource_x,
            y: api.resource_y,
            type: "scatter",
            mode: "text",
            marker: {
              color: "green",
              size: 12,
              line: {
                color: "white",
                width: 2,
              },
              symbol: "square-dot",
            },
            text: api.resource_icon,
            hovertemplate: "Resource",
            textposition: "center",
            textfont: {
              size: 18,
            },
          },
        ]}
        layout={{
          width: 1000,
          height: 700,
          showlegend: false,
        }}
        config={{ responsive: true }}
        onClick={(data) => {
          props.handler(data.points[0].x, data.points[0].y, api.resources);
        }}
      />
    </div>
  );
};
export default Main;
// shapes: [
//   {
//     type: "path",
//     path: " M15.348 0.391 C 9.348 1.800,3.832 7.128,1.183 14.075 L 0.176 16.714 0.087 336.722 C 0.008 620.938,0.057 656.969,0.529 658.855 C 2.361 666.189,8.053 672.621,14.679 674.846 L 16.867 675.581 250.000 675.581 L 483.133 675.581 485.321 674.846 C 491.936 672.625,497.608 666.224,499.469 658.881 C 499.940 657.020,500.000 628.452,500.000 405.626 L 500.000 154.469 438.488 154.469 C 383.208 154.469,376.781 154.412,375.064 153.907 C 368.676 152.031,363.298 146.677,360.725 139.632 L 359.782 137.051 359.690 68.526 L 359.597 0.000 188.155 0.035 C 86.362 0.056,16.159 0.201,15.348 0.391 M398.575 255.288 L 403.941 256.277 403.941 265.223 L 403.941 274.169 402.094 273.933 C 401.078 273.803,399.692 273.552,399.015 273.374 C 396.431 272.697,393.946 272.971,391.584 274.194 C 388.819 275.625,388.889 275.367,388.846 284.219 L 388.811 291.344 395.848 291.344 L 402.885 291.344 402.885 301.372 L 402.885 311.400 395.848 311.400 L 388.811 311.400 388.811 347.115 L 388.811 382.829 377.023 382.829 L 365.236 382.829 365.236 347.115 L 365.236 311.400 361.189 311.400 L 357.143 311.400 357.143 301.372 L 357.143 291.344 361.139 291.344 L 365.135 291.344 365.345 282.460 C 365.460 277.573,365.720 272.905,365.923 272.086 C 366.126 271.266,366.455 269.446,366.653 268.039 C 368.330 256.172,379.396 251.752,398.575 255.288 M345.444 319.581 L 345.533 382.829 333.745 382.829 L 321.956 382.829 321.956 378.219 L 321.956 373.610 320.051 375.351 C 318.196 377.046,311.359 381.763,308.989 382.981 C 301.535 386.815,284.827 385.784,275.155 380.894 C 244.302 365.295,240.206 320.107,267.644 298.034 C 277.994 289.708,292.970 286.852,304.763 290.955 C 312.942 293.800,315.761 295.381,319.581 299.262 L 321.956 301.674 321.956 279.150 C 321.956 266.762,322.064 256.519,322.196 256.387 C 322.327 256.256,327.592 256.190,333.895 256.241 L 345.355 256.334 345.444 319.581 M199.913 289.948 C 231.632 296.412,245.955 337.414,226.742 366.750 C 216.217 382.821,191.006 390.184,174.831 381.910 C 170.498 379.694,167.014 377.426,164.673 375.296 L 163.089 373.856 162.999 395.408 L 162.908 416.960 151.123 416.960 L 139.338 416.960 139.338 354.152 L 139.338 291.344 151.126 291.344 L 162.913 291.344 162.913 296.519 L 162.913 301.695 164.409 300.266 C 168.525 296.335,171.854 294.099,175.053 293.121 C 175.827 292.884,177.627 292.216,179.053 291.638 C 185.131 289.171,192.980 288.535,199.913 289.948 M181.791 310.883 C 169.044 313.298,161.858 322.805,161.858 337.255 C 161.858 354.079,171.213 363.842,187.386 363.896 C 201.389 363.944,210.899 354.214,211.698 339.022 C 212.696 320.045,199.411 307.545,181.791 310.883 M293.631 310.596 C 267.482 314.213,265.470 357.292,291.168 363.322 C 306.790 366.988,320.339 358.132,322.693 342.716 C 325.748 322.711,312.434 307.996,293.631 310.596 M106.603 359.629 C 120.319 361.854,120.912 381.748,107.358 384.939 C 96.868 387.409,86.943 376.698,91.377 367.694 C 93.863 362.643,97.884 359.964,103.976 359.298 C 104.170 359.277,105.352 359.425,106.603 359.629 ",
//     fillcolor: "rgba(255, 140, 184, 0.5)",
//   },
// ],

// annotations: [
//   {
//     x: api.resource_x[0],
//     y: api.resource_y[0],
//     text: "ðŸ“„",
//   },
// ],
